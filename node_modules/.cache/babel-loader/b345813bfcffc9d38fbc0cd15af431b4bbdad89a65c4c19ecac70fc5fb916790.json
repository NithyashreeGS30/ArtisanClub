{"ast":null,"code":"// import React, { useState, useEffect } from 'react';\n// import './BodyPage.css';\n// import Header from './header/header';\n// import CheckoutPage from './checkoutpage/checkoutpage';\n// import EditIcon from '@mui/icons-material/Edit';\n// import DeleteIcon from '@mui/icons-material/Delete'; // Import the delete icon\n\n// const BodyPage1 = () => {\n//   const [cartItems, setCartItems] = useState([]);\n//   const [isCartOpen, setIsCartOpen] = useState(false);\n//   const [selectedCategory, setSelectedCategory] = useState('');\n//   const [selectedArtist, setSelectedArtist] = useState('');\n//   const [products, setProducts] = useState([]);\n//   const [showCondition, setShowCondition] = useState(null);\n//   const [editProductId, setEditProductId] = useState(null);\n//   const [editPrice, setEditPrice] = useState('');\n//   const [editCondition, setEditCondition] = useState('');\n\n//   useEffect(() => {\n//     if (selectedCategory) {\n//       fetchProducts(selectedCategory);\n//     }\n//   }, [selectedCategory]);\n\n//   const fetchProducts = async (category) => {\n//     try {\n//       const response = await fetch(`http://127.0.0.1:8000/search_by_category?category=${category}`);\n//       if (!response.ok) {\n//         throw new Error('Failed to fetch products');\n//       }\n//       const data = await response.json();\n//       const artworksArray = Object.values(data.artworks);\n//       setProducts(artworksArray);\n//     } catch (error) {\n//       console.error('Error fetching products:', error.message);\n//     }\n//   };\n\n//   const handleCategoryChange = (category) => {\n//     setSelectedCategory(category);\n//   };\n\n//   const handleArtistChange = async (artist) => {\n//     try {\n//       const response = await fetch(`http://127.0.0.1:8000/search_by_artist?artist=${artist}`);\n//       if (!response.ok) {\n//         throw new Error('Failed to fetch products');\n//       }\n//       const data = await response.json();\n//       const artworksArray = Object.values(data.artworks);\n//       setProducts(artworksArray);\n//     } catch (error) {\n//       console.error('Error fetching products:', error.message);\n//     }\n//   };\n\n//   const addToCart = (product) => {\n//     const existingItem = cartItems.find((item) => item._id === product._id);\n\n//     if (existingItem) {\n//       const updatedCartItems = cartItems.map((item) =>\n//         item._id === product._id ? { ...item, quantity: item.quantity + 1 } : item\n//       );\n//       setCartItems(updatedCartItems);\n//     } else {\n//       setCartItems([...cartItems, { ...product, quantity: 1 }]);\n//     }\n//   };\n\n//   const toggleCart = () => {\n//     setIsCartOpen((prevState) => !prevState);\n//   };\n\n//   const handleImageClick = (productId) => {\n//     setShowCondition(productId);\n//   };\n\n//   const handleCloseCondition = () => {\n//     setShowCondition(null);\n//   };\n\n//   const handleEditClick = (productId, initialPrice, initialCondition) => {\n//     setEditProductId(productId);\n//     setEditPrice(initialPrice);\n//     setEditCondition(initialCondition);\n//   };\n\n//   const handleEditCancel = () => {\n//     setEditProductId(null);\n//     setEditPrice('');\n//     setEditCondition('');\n//   };\n\n//   const handleEditSubmit = async () => {\n//     try {\n//       const response = await fetch('http://127.0.0.1:8000/update_artwork', {\n//         method: 'PUT',\n//         headers: {\n//           'Content-Type': 'application/json'\n//         },\n//         body: JSON.stringify({\n//           art_id: editProductId,\n//           new_price: editPrice,\n//           new_condition: editCondition\n//         })\n//       });\n\n//       if (!response.ok) {\n//         throw new Error('Failed to update artwork');\n//       }\n\n//       // Update the products array with the edited data\n//       const updatedProducts = products.map(product => {\n//         if (product.ArtID === editProductId) {\n//           return {\n//             ...product,\n//             Price: editPrice, // Update the price\n//             Condition: editCondition // Update the condition\n//           };\n//         }\n//         return product;\n//       });\n\n//       setProducts(updatedProducts);\n\n//       const data = await response.json();\n//       console.log(data); // Logging the response from the server\n//       setEditProductId(null);\n//       setEditPrice('');\n//       setEditCondition('');\n//     } catch (error) {\n//       console.error('Error updating artwork:', error.message);\n//     }\n//   };\n\n//   const handleDeleteProduct = async (productId) => {\n//     try {\n//       const response = await fetch(`http://127.0.0.1:8000/delete_artwork?art_id=${productId}`, {\n//         method: 'DELETE'\n//       });\n\n//       if (!response.ok) {\n//         throw new Error('Failed to delete product');\n//       }\n\n//       const data = await response.json();\n//       console.log(data.message); // Log the response message from the server\n\n//       // Filter out the deleted product from the products array\n//       const updatedProducts = products.filter(product => product.ArtID !== productId);\n//       setProducts(updatedProducts);\n//     } catch (error) {\n//       console.error('Error deleting product:', error.message);\n//     }\n//   };\n\n//   return (\n//     <div>\n//       <Header\n//         headName=\"SignOut\"\n//         cartCount={cartItems.length}\n//         toggleCart={toggleCart}\n//         onCategoryChange={handleCategoryChange}\n//         onArtistChange={handleArtistChange}\n//       />\n//       <div className=\"body-page\">\n//         <div className=\"product-grid\">\n//           {products.map((product) => (\n//             <div key={product._id} className=\"product-card\">\n//               <img\n//                 src={product.ArtImages}\n//                 alt={product.Artist}\n//                 className=\"product-image\"\n//                 style={{ width: '200px', height: '200px' }}\n//                 onClick={() => handleImageClick(product._id)}\n//               />\n//               <div className=\"product-info\">\n//                 <div className=\"product-name\">{product.Artist}</div>\n//                 <div className=\"product-price\">{product.Price}</div>\n//                 {showCondition === product._id && (\n//                   <div className=\"product-condition\">\n//                     <h3>Condition:</h3>\n//                     <p>{product.Condition}</p>\n//                     <button onClick={handleCloseCondition} style={{ background: '#ff9900', color: 'white' }}>\n//                       Close\n//                     </button>\n//                   </div>\n//                 )}\n//                 {editProductId === product.ArtID ? (\n//                   <div>\n//                     <input\n//                       type=\"text\"\n//                       value={editPrice}\n//                       onChange={(e) => setEditPrice(e.target.value)}\n//                       placeholder=\"Enter new price\"\n//                     />\n//                     <input\n//                       type=\"text\"\n//                       value={editCondition}\n//                       onChange={(e) => setEditCondition(e.target.value)}\n//                       placeholder=\"Enter new condition\"\n//                     />\n//                     <button onClick={handleEditSubmit}>Submit</button>\n//                     <button onClick={handleEditCancel}>Cancel</button>\n//                   </div>\n//                 ) : (\n//                   <>\n//                     <EditIcon\n//                       style={{ marginRight: '10px', cursor: 'pointer', color: '#ff9900' }}\n//                       onClick={() => handleEditClick(product.ArtID, product.Price, product.Condition)}\n//                     />\n//                     <DeleteIcon\n//                       style={{ cursor: 'pointer', color: '#ff9900' }}\n//                       onClick={() => handleDeleteProduct(product.ArtID)}\n//                     />\n//                   </>\n//                 )}\n//                 <button\n//                   style={{ marginTop: '10px' }}\n//                   className=\"add-to-cart-button\"\n//                   onClick={() => addToCart(product)}\n//                 >\n//                   Add to Cart\n//                 </button>\n//               </div>\n//             </div>\n//           ))}\n//         </div>\n//       </div>\n//       {isCartOpen && <CheckoutPage cartItems={cartItems} />}\n//     </div>\n//   );\n// };\n\n// export default BodyPage1;","map":{"version":3,"names":[],"sources":["/Users/nithyashree/Desktop/ARTISAN/ArtisanClub/src/bodyadmin.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\n// import './BodyPage.css';\n// import Header from './header/header';\n// import CheckoutPage from './checkoutpage/checkoutpage';\n// import EditIcon from '@mui/icons-material/Edit';\n// import DeleteIcon from '@mui/icons-material/Delete'; // Import the delete icon\n\n// const BodyPage1 = () => {\n//   const [cartItems, setCartItems] = useState([]);\n//   const [isCartOpen, setIsCartOpen] = useState(false);\n//   const [selectedCategory, setSelectedCategory] = useState('');\n//   const [selectedArtist, setSelectedArtist] = useState('');\n//   const [products, setProducts] = useState([]);\n//   const [showCondition, setShowCondition] = useState(null);\n//   const [editProductId, setEditProductId] = useState(null);\n//   const [editPrice, setEditPrice] = useState('');\n//   const [editCondition, setEditCondition] = useState('');\n\n//   useEffect(() => {\n//     if (selectedCategory) {\n//       fetchProducts(selectedCategory);\n//     }\n//   }, [selectedCategory]);\n\n//   const fetchProducts = async (category) => {\n//     try {\n//       const response = await fetch(`http://127.0.0.1:8000/search_by_category?category=${category}`);\n//       if (!response.ok) {\n//         throw new Error('Failed to fetch products');\n//       }\n//       const data = await response.json();\n//       const artworksArray = Object.values(data.artworks);\n//       setProducts(artworksArray);\n//     } catch (error) {\n//       console.error('Error fetching products:', error.message);\n//     }\n//   };\n\n//   const handleCategoryChange = (category) => {\n//     setSelectedCategory(category);\n//   };\n\n//   const handleArtistChange = async (artist) => {\n//     try {\n//       const response = await fetch(`http://127.0.0.1:8000/search_by_artist?artist=${artist}`);\n//       if (!response.ok) {\n//         throw new Error('Failed to fetch products');\n//       }\n//       const data = await response.json();\n//       const artworksArray = Object.values(data.artworks);\n//       setProducts(artworksArray);\n//     } catch (error) {\n//       console.error('Error fetching products:', error.message);\n//     }\n//   };\n\n//   const addToCart = (product) => {\n//     const existingItem = cartItems.find((item) => item._id === product._id);\n\n//     if (existingItem) {\n//       const updatedCartItems = cartItems.map((item) =>\n//         item._id === product._id ? { ...item, quantity: item.quantity + 1 } : item\n//       );\n//       setCartItems(updatedCartItems);\n//     } else {\n//       setCartItems([...cartItems, { ...product, quantity: 1 }]);\n//     }\n//   };\n\n//   const toggleCart = () => {\n//     setIsCartOpen((prevState) => !prevState);\n//   };\n\n//   const handleImageClick = (productId) => {\n//     setShowCondition(productId);\n//   };\n\n//   const handleCloseCondition = () => {\n//     setShowCondition(null);\n//   };\n\n//   const handleEditClick = (productId, initialPrice, initialCondition) => {\n//     setEditProductId(productId);\n//     setEditPrice(initialPrice);\n//     setEditCondition(initialCondition);\n//   };\n\n//   const handleEditCancel = () => {\n//     setEditProductId(null);\n//     setEditPrice('');\n//     setEditCondition('');\n//   };\n\n//   const handleEditSubmit = async () => {\n//     try {\n//       const response = await fetch('http://127.0.0.1:8000/update_artwork', {\n//         method: 'PUT',\n//         headers: {\n//           'Content-Type': 'application/json'\n//         },\n//         body: JSON.stringify({\n//           art_id: editProductId,\n//           new_price: editPrice,\n//           new_condition: editCondition\n//         })\n//       });\n  \n//       if (!response.ok) {\n//         throw new Error('Failed to update artwork');\n//       }\n  \n//       // Update the products array with the edited data\n//       const updatedProducts = products.map(product => {\n//         if (product.ArtID === editProductId) {\n//           return {\n//             ...product,\n//             Price: editPrice, // Update the price\n//             Condition: editCondition // Update the condition\n//           };\n//         }\n//         return product;\n//       });\n  \n//       setProducts(updatedProducts);\n  \n//       const data = await response.json();\n//       console.log(data); // Logging the response from the server\n//       setEditProductId(null);\n//       setEditPrice('');\n//       setEditCondition('');\n//     } catch (error) {\n//       console.error('Error updating artwork:', error.message);\n//     }\n//   };\n\n//   const handleDeleteProduct = async (productId) => {\n//     try {\n//       const response = await fetch(`http://127.0.0.1:8000/delete_artwork?art_id=${productId}`, {\n//         method: 'DELETE'\n//       });\n  \n//       if (!response.ok) {\n//         throw new Error('Failed to delete product');\n//       }\n  \n//       const data = await response.json();\n//       console.log(data.message); // Log the response message from the server\n  \n//       // Filter out the deleted product from the products array\n//       const updatedProducts = products.filter(product => product.ArtID !== productId);\n//       setProducts(updatedProducts);\n//     } catch (error) {\n//       console.error('Error deleting product:', error.message);\n//     }\n//   };\n  \n\n//   return (\n//     <div>\n//       <Header\n//         headName=\"SignOut\"\n//         cartCount={cartItems.length}\n//         toggleCart={toggleCart}\n//         onCategoryChange={handleCategoryChange}\n//         onArtistChange={handleArtistChange}\n//       />\n//       <div className=\"body-page\">\n//         <div className=\"product-grid\">\n//           {products.map((product) => (\n//             <div key={product._id} className=\"product-card\">\n//               <img\n//                 src={product.ArtImages}\n//                 alt={product.Artist}\n//                 className=\"product-image\"\n//                 style={{ width: '200px', height: '200px' }}\n//                 onClick={() => handleImageClick(product._id)}\n//               />\n//               <div className=\"product-info\">\n//                 <div className=\"product-name\">{product.Artist}</div>\n//                 <div className=\"product-price\">{product.Price}</div>\n//                 {showCondition === product._id && (\n//                   <div className=\"product-condition\">\n//                     <h3>Condition:</h3>\n//                     <p>{product.Condition}</p>\n//                     <button onClick={handleCloseCondition} style={{ background: '#ff9900', color: 'white' }}>\n//                       Close\n//                     </button>\n//                   </div>\n//                 )}\n//                 {editProductId === product.ArtID ? (\n//                   <div>\n//                     <input\n//                       type=\"text\"\n//                       value={editPrice}\n//                       onChange={(e) => setEditPrice(e.target.value)}\n//                       placeholder=\"Enter new price\"\n//                     />\n//                     <input\n//                       type=\"text\"\n//                       value={editCondition}\n//                       onChange={(e) => setEditCondition(e.target.value)}\n//                       placeholder=\"Enter new condition\"\n//                     />\n//                     <button onClick={handleEditSubmit}>Submit</button>\n//                     <button onClick={handleEditCancel}>Cancel</button>\n//                   </div>\n//                 ) : (\n//                   <>\n//                     <EditIcon\n//                       style={{ marginRight: '10px', cursor: 'pointer', color: '#ff9900' }}\n//                       onClick={() => handleEditClick(product.ArtID, product.Price, product.Condition)}\n//                     />\n//                     <DeleteIcon\n//                       style={{ cursor: 'pointer', color: '#ff9900' }}\n//                       onClick={() => handleDeleteProduct(product.ArtID)}\n//                     />\n//                   </>\n//                 )}\n//                 <button\n//                   style={{ marginTop: '10px' }}\n//                   className=\"add-to-cart-button\"\n//                   onClick={() => addToCart(product)}\n//                 >\n//                   Add to Cart\n//                 </button>\n//               </div>\n//             </div>\n//           ))}\n//         </div>\n//       </div>\n//       {isCartOpen && <CheckoutPage cartItems={cartItems} />}\n//     </div>\n//   );\n// };\n\n// export default BodyPage1;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}